model TravelPlan {
    id           String     @id @default(uuid())
    userId       String
    title        String
    description  String?    @db.Text
    destination  String
    country      String?
    startDate    DateTime
    endDate      DateTime
    budgetMin    Decimal?   @db.Decimal(10, 2)
    budgetMax    Decimal?   @db.Decimal(10, 2)
    travelType   TravelType @default(SOLO)
    maxTravelers Int?
    status       TripStatus @default(PLANNING)
    isPublic     Boolean    @default(true)
    image        String?
    activities   String[]   @default([])
    isDeleted    Boolean    @default(false)
    // reviewsReceived Review[]   @relation("ReviewsReceived")

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    // Relations
    user     User            @relation(fields: [userId], references: [id], onDelete: Cascade)
    requests TravelRequest[]
    reviews  Review[]       
    // reviews  Review[]

    @@map("travel_plans")
}

model TravelRequest {
    id           String        @id @default(uuid())
    travelPlanId String
    requesterId  String
    receiverId   String
    message      String?       @db.Text
    status       RequestStatus @default(PENDING)
    createdAt    DateTime      @default(now())
    updatedAt    DateTime      @updatedAt

    travelPlan TravelPlan @relation(fields: [travelPlanId], references: [id], onDelete: Cascade)
    requester  User       @relation("SentRequests", fields: [requesterId], references: [id])
    receiver   User       @relation("ReceivedRequests", fields: [receiverId], references: [id])

    @@unique([travelPlanId, requesterId])
    @@map("travel_requests")
}
