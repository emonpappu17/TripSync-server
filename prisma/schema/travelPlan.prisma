model TravelPlan {
    id           String     @id @default(uuid())
    userId       String
    title        String
    description  String?    @db.Text
    destination  String
    country      String?
    startDate    DateTime
    endDate      DateTime
    budgetMin    Int?
    budgetMax    Int?
    // budgetMin    Decimal?   @db.Decimal(10, 2)
    // budgetMax    Decimal?   @db.Decimal(10, 2)
    travelType   TravelType @default(SOLO)
    maxTravelers Int?
    status       TripStatus @default(PLANNING)
    isPublic     Boolean    @default(true)
    image        String?
    activities   String[]   @default([])
    isDeleted    Boolean    @default(false)
    // reviewsReceived Review[]   @relation("ReviewsReceived")

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    // Relations
    user          User            @relation(fields: [userId], references: [id], onDelete: Cascade)
    requests      TravelRequest[]
    reviews       Review[]
    // reviews  Review[]
    travelMatches TravelMatch[]

    @@map("travel_plans")
}

model TravelRequest {
    id           String        @id @default(uuid())
    travelPlanId String
    requesterId  String
    receiverId   String
    message      String?       @db.Text
    status       RequestStatus @default(PENDING)
    createdAt    DateTime      @default(now())
    updatedAt    DateTime      @updatedAt

    travelPlan TravelPlan @relation(fields: [travelPlanId], references: [id], onDelete: Cascade)
    requester  User       @relation("SentRequests", fields: [requesterId], references: [id])
    receiver   User       @relation("ReceivedRequests", fields: [receiverId], references: [id])

    @@unique([travelPlanId, requesterId])
    @@map("travel_requests")
}

model TravelMatch {
    id           String   @id @default(uuid())
    travelPlanId String
    user1Id      String
    user2Id      String
    // matchScore   Int? // 0-100 compatibility score
    isActive     Boolean  @default(true)
    createdAt    DateTime @default(now())

    travelPlan TravelPlan @relation(fields: [travelPlanId], references: [id], onDelete: Cascade)

    @@unique([travelPlanId, user1Id, user2Id])
    // @@index([user1Id])
    // @@index([user2Id])
    @@map("travel_matches")
}
