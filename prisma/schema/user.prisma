model User {
  id        String  @id @default(uuid())
  email     String  @unique
  password  String
  role      Role    @default(USER)
  isActive  Boolean @default(true)
  isDeleted Boolean @default(false)

  // Profile
  fullName         String
  profileImage     String?
  bio              String?  @db.Text
  phone            String?
  currentLocation  String?
  gender           Gender?
  isVerified       Boolean  @default(false)
  interests        String[] @default([])
  visitedCountries String[] @default([])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  payments         Payment[]
  sentRequests     TravelRequest[] @relation("SentRequests")
  receivedRequests TravelRequest[] @relation("ReceivedRequests")
  // userTravelInterests UserTravelInterest[]
  travelPlans      TravelPlan[]
  reviewsGiven     Review[]        @relation("ReviewsGiven")
  reviewsReceived  Review[]        @relation("ReviewsReceived")
  subscriptions    Subscription[]

  @@index([email])
  @@index([role])
  @@index([fullName])
  @@map("users")
}

model Review {
  id             String   @id @default(uuid())
  fromReviewerId String
  toReviewerId   String
  tourPlanId     String
  rating         Int // 1-5 stars
  comment        String?  @db.Text
  isPublic       Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  formReviewer   User       @relation("ReviewsGiven", fields: [fromReviewerId], references: [id], onDelete: Cascade)
  tourPlanReview TravelPlan @relation(fields: [tourPlanId], references: [id], onDelete: Cascade)
  toReviewer     User       @relation("ReviewsReceived", fields: [toReviewerId], references: [id], onDelete: Cascade)

  @@unique([fromReviewerId, toReviewerId])
  @@index([rating])
  @@map("reviews")
}
