model Payment {
    id                 String        @id @default(uuid())
    userId             String
    amount             Decimal       @db.Decimal(10, 2)
    transactionId      String        @unique
    paymentGatewayData Json?
    status             PaymentStatus @default(PENDING)
    metadata           Json?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    user         User          @relation(fields: [userId], references: [id])
    subscription Subscription?

    @@index([userId])
    @@index([status])
    @@index([transactionId])
    @@map("payments")
}

model Subscription {
    id        String             @id @default(uuid())
    userId    String
    paymentId String             @unique
    plan      SubscriptionPlan
    status    SubscriptionStatus @default(ACTIVE)
    startDate DateTime           @default(now())
    endDate   DateTime
    createdAt DateTime           @default(now())
    updatedAt DateTime           @updatedAt

    user    User    @relation(fields: [userId], references: [id])
    payment Payment @relation(fields: [paymentId], references: [id])

    @@map("subscriptions")
}
